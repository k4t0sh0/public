<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦æ ¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div id="authScreen">
        <div class="auth-container">
            <h2>ğŸ“š å­¦æ ¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h2>

            <div id="loginForm">
                <h3>ãƒ­ã‚°ã‚¤ãƒ³</h3>
                <input type="email" id="loginEmail" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹">
                <input type="password" id="loginPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
                <button onclick="login()">ãƒ­ã‚°ã‚¤ãƒ³</button>
                <p>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ <a href="#" onclick="showRegister(); return false;">æ–°è¦ç™»éŒ²</a></p>
            </div>

            <div id="registerForm" style="display:none;">
                <h3>æ–°è¦ç™»éŒ²</h3>
                <input type="email" id="registerEmail" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹">
                <input type="password" id="registerPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ6æ–‡å­—ä»¥ä¸Šï¼‰">
                <button onclick="register()">ç™»éŒ²</button>
                <p>æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ <a href="#" onclick="showLogin(); return false;">ãƒ­ã‚°ã‚¤ãƒ³</a></p>
            </div>

            <!-- ãƒ¡ãƒ¼ãƒ«ç¢ºèªå¾…ã¡ç”»é¢ -->
            <div id="emailVerificationForm" style="display:none;">
                <h3>ğŸ“§ ãƒ¡ãƒ¼ãƒ«ç¢ºèª</h3>
                <p>ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚</p>
                <p><strong id="verificationEmail"></strong></p>
                <p>ãƒ¡ãƒ¼ãƒ«å†…ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>

                <div class="verification-actions">
                    <button onclick="checkEmailVerified()" class="verify-btn">
                        ç¢ºèªå®Œäº†ãƒ»ãƒ­ã‚°ã‚¤ãƒ³
                    </button>
                    <button onclick="resendVerificationEmail()" class="resend-btn">
                        ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’å†é€ä¿¡
                    </button>
                    <button onclick="backToLogin()" class="back-btn">
                        ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«æˆ»ã‚‹
                    </button>
                </div>

                <div id="verificationMessage" class="info-message"></div>
            </div>

            <div class="divider" id="divider">ã¾ãŸã¯</div>

            <button onclick="anonymousLogin()" class="anonymous-btn" id="anonymousBtn">
                ğŸ‘¤ åŒ¿åã§å‚åŠ ï¼ˆé–²è¦§ã®ã¿ï¼‰
            </button>

            <div id="authError" class="error-message"></div>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªç”»é¢ -->
    <div id="appScreen" style="display:none;">
        <div class="container">
            <div class="header">
                <h1>ğŸ“š å­¦æ ¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h1>
                <div class="date-display" id="dateDisplay"></div>

                <!-- æ›œæ—¥ãƒœã‚¿ãƒ³ -->
                <div class="day-selector">
                    <button class="day-btn active" onclick="switchDay('monday')">æœˆ</button>
                    <button class="day-btn" onclick="switchDay('tuesday')">ç«</button>
                    <button class="day-btn" onclick="switchDay('wednesday')">æ°´</button>
                    <button class="day-btn" onclick="switchDay('thursday')">æœ¨</button>
                    <button class="day-btn" onclick="switchDay('friday')">é‡‘</button>
                </div>

                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± -->
                <div class="user-info">
                    <span id="userStatus"></span>
                    <button onclick="sendEmail()" id="emailBtn" class="email-btn">ğŸ“§ ãƒ¡ãƒ¼ãƒ«é€ä¿¡</button>
                    <button onclick="logout()" class="logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                </div>
            </div>

            <!-- .contentã‚’.containerã®ä¸­ã«å…¥ã‚Œã‚‹ -->
            <div class="content">
                <div class="left-column">
                    <div class="section schedule-section">
                        <div class="section-title">
                            <span>ğŸ“– ä»Šæ—¥ã®æ™‚é–“å‰²</span>
                            <div>
                                <button class="edit-btn" onclick="openScheduleModal()">ç·¨é›†</button>
                                <button class="edit-btn" onclick="openAllBulkModal()">ä¸€æ‹¬</button>
                            </div>
                        </div>
                        <div class="schedule-grid" id="scheduleList"></div>
                    </div>
                </div>

                <div class="right-column">
                    <div class="section items-section">
                        <div class="section-title">
                            <span>ğŸ’ æŒã¡ç‰©</span>
                            <button class="edit-btn" onclick="openItemsModal()">ç·¨é›†</button>
                        </div>
                        <ul class="items-list" id="itemsList"></ul>
                    </div>

                    <div class="section event-section">
                        <div class="section-title">
                            <span>ğŸ—“ï¸ æ˜æ—¥ã®äºˆå®š</span>
                            <button class="edit-btn" onclick="openEventModal()">ç·¨é›†</button>
                        </div>
                        <div class="event-box" id="eventBox"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- â†‘ .container ã®çµ‚äº† -->

        <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã¯.containerã®å¤–ã€.appScreenã®ä¸­ -->
        <!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="scheduleModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">æ™‚é–“å‰²ã‚’ç·¨é›†</div>
                <div class="modal-body" id="scheduleForm"></div>
                <div class="btn-group">
                    <button class="btn btn-save" onclick="saveSchedule()">ä¿å­˜</button>
                    <button class="btn btn-cancel" onclick="closeModal('scheduleModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>

        <!-- æŒã¡ç‰©ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="itemsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">æŒã¡ç‰©ã‚’ç·¨é›†</div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>æŒã¡ç‰©ï¼ˆ1è¡Œã«1ã¤ãšã¤å…¥åŠ›ï¼‰</label>
                        <textarea id="itemsInput" rows="8"></textarea>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-save" onclick="saveItems()">ä¿å­˜</button>
                    <button class="btn btn-cancel" onclick="closeModal('itemsModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>

        <!-- æ˜æ—¥ã®äºˆå®šç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="eventModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">æ˜æ—¥ã®äºˆå®šã‚’ç·¨é›†</div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>äºˆå®š</label>
                        <textarea id="eventInput" rows="5"></textarea>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-save" onclick="saveEvent()">ä¿å­˜</button>
                    <button class="btn btn-cancel" onclick="closeModal('eventModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>

        <!-- å®Œå…¨ä¸€æ‹¬ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div id="allBulkModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">ä¸€æ‹¬ç·¨é›†ï¼ˆã™ã¹ã¦ï¼‰</div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>ğŸ“– æ™‚é–“å‰²ï¼ˆ1è¡Œï¼1æ™‚é–“ç›®ï¼‰</label>
                        <textarea id="bulkScheduleInput" rows="7" placeholder="1é™ å›½èª æ¼¢å­—
2é™ æ•°å­¦ åˆ†æ•°"></textarea>
                    </div>
                    <div class="form-group">
                        <label>ğŸ’ æŒã¡ç‰©ï¼ˆ1è¡Œã«1ã¤ï¼‰</label>
                        <textarea id="bulkItemsInput" rows="5" placeholder="æ•™ç§‘æ›¸
ãƒãƒ¼ãƒˆ
ç­†è¨˜ç”¨å…·"></textarea>
                    </div>
                    <div class="form-group">
                        <label>ğŸ—“ï¸ æ˜æ—¥ã®äºˆå®šï¼ˆæ”¹è¡ŒOKï¼‰</label>
                        <textarea id="bulkEventInput" rows="4" placeholder="æ•°å­¦ã®å°ãƒ†ã‚¹ãƒˆ
éƒ¨æ´»ã¯æ—©ã‚ã«é›†åˆ"></textarea>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-save" onclick="saveAllBulk()">ä¿å­˜</button>
                    <button class="btn btn-cancel" onclick="closeModal('allBulkModal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAZoOx3Y6_550EFyJf6pGLN4Vd0kgBbFHc",
    authDomain: "schedule-364a4.firebaseapp.com",
    databaseURL: "https://schedule-364a4-default-rtdb.firebaseio.com",
    projectId: "schedule-364a4",
    storageBucket: "schedule-364a4.firebasestorage.app",
    messagingSenderId: "152068985946",
    appId: "1:152068985946:web:8dd5e7bcdc3af7d93db463",
    measurementId: "G-21YPXM18HC"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
    <script src="script.js"></script>
</body>

</html>
